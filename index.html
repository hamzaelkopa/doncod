<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAMZA ELKOPA AI - Neural Sync System</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --ai-green: #00f2ff;
            --ai-dark-green: #003a3d;
            --ai-red: #ff1a1a;
            --ai-bg: #030303;
            --ai-card-bg: rgba(0, 15, 15, 0.8);
        }

        body {
            background-color: var(--ai-bg);
            color: var(--ai-green);
            font-family: 'Rajdhani', sans-serif;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(0, 242, 255, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(255, 26, 26, 0.05) 0%, transparent 40%);
        }

        h1, h2, h3, .font-hud { font-family: 'Orbitron', sans-serif; }

        .ai-border {
            border: 1px solid var(--ai-green);
            box-shadow: 0 0 10px rgba(0, 242, 255, 0.2), inset 0 0 10px rgba(0, 242, 255, 0.1);
            position: relative;
            background: var(--ai-card-bg);
            backdrop-filter: blur(12px);
        }

        .ai-border::before {
            content: '';
            position: absolute;
            top: -2px; left: -2px;
            width: 15px; height: 15px;
            border-top: 3px solid var(--ai-green);
            border-right: 3px solid var(--ai-green);
            transform: rotate(-90deg);
        }

        .ai-border::after {
            content: '';
            position: absolute;
            bottom: -2px; right: -2px;
            width: 15px; height: 15px;
            border-bottom: 3px solid var(--ai-green);
            border-left: 3px solid var(--ai-green);
            transform: rotate(-90deg);
        }

        .neon-text-green { text-shadow: 0 0 8px var(--ai-green); }
        .neon-text-red { text-shadow: 0 0 10px var(--ai-red); color: var(--ai-red); }

        .task-input {
            background: rgba(0, 40, 40, 0.3);
            border: 1px solid var(--ai-dark-green);
            color: var(--ai-green);
            padding: 12px;
            transition: border 0.3s;
        }

        .task-input:focus {
            border-color: var(--ai-green);
            outline: none;
            box-shadow: 0 0 8px rgba(0, 242, 255, 0.3);
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .status-dot {
            width: 8px; height: 8px;
            background: var(--ai-red);
            border-radius: 50%;
            display: inline-block;
            box-shadow: 0 0 10px var(--ai-red);
            animation: pulse 1.5s infinite;
        }

        .ai-insight {
            font-size: 10px;
            background: rgba(255, 26, 26, 0.1);
            border-left: 2px solid var(--ai-red);
            padding: 4px 8px;
            margin-top: 5px;
            color: #ff8080;
        }

        .loading-ring {
            display: inline-block;
            width: 12px; height: 12px;
            border: 2px solid var(--ai-green);
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        .btn-action-red {
            border: 1px solid var(--ai-red);
            color: var(--ai-red);
            transition: all 0.3s;
        }

        .btn-action-red:hover {
            background: var(--ai-red);
            color: white;
            box-shadow: 0 0 15px var(--ai-red);
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <header class="max-w-7xl mx-auto flex justify-between items-end mb-12 border-b border-ai-green/20 pb-4">
        <div>
            <h1 class="text-3xl md:text-5xl font-bold neon-text-green tracking-tighter uppercase">HAMZA ELKOPA AI</h1>
            <p class="text-[10px] opacity-60 font-mono">NEURAL_AI_ENABLED // V6.5.0 // CORE_ALPHA</p>
        </div>
        <div class="text-right font-mono text-[10px]">
            <div class="flex items-center gap-2 justify-end">
                SYSTEM STATUS: <span id="aiStatus" class="neon-text-green">ONLINE</span>
                <span class="status-dot"></span>
            </div>
            <div id="clockDisplay">FETCHING_SYNC_TIME...</div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8">
        
        <aside class="lg:col-span-4 space-y-6">
            <div class="ai-border p-6 rounded-sm">
                <h2 class="text-sm font-bold uppercase tracking-widest mb-6 font-hud">Efficiency Metrics</h2>
                <div class="relative flex justify-center">
                    <canvas id="mainProgress" width="220" height="220"></canvas>
                    <div class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none">
                        <span id="percentLabel" class="text-4xl font-bold neon-text-green">0%</span>
                        <span class="text-[9px] uppercase">Completion Rate</span>
                    </div>
                </div>
                <div class="grid grid-cols-3 gap-2 mt-8 text-center font-mono">
                    <div class="bg-ai-dark-green/20 p-2">
                        <span class="block text-[10px] opacity-60">DAY</span>
                        <span id="countDay" class="text-xl font-bold">0</span>
                    </div>
                    <div class="bg-ai-dark-green/20 p-2">
                        <span class="block text-[10px] opacity-60">WEEK</span>
                        <span id="countWeek" class="text-xl font-bold">0</span>
                    </div>
                    <div class="bg-ai-dark-green/20 p-2">
                        <span class="block text-[10px] opacity-60">MONTH</span>
                        <span id="countMonth" class="text-xl font-bold">0</span>
                    </div>
                </div>
            </div>

            <div class="ai-border p-4 rounded-sm">
                <p class="text-[10px] mb-2 opacity-50 font-mono">NEURAL_OSCILLATION_DATA</p>
                <canvas id="waveChart" height="100"></canvas>
            </div>
        </aside>

        <section class="lg:col-span-8 space-y-6">
            <div class="ai-border p-6">
                <h2 class="text-sm font-bold mb-4 flex items-center gap-2 font-hud">
                    <span class="w-2 h-4 bg-ai-green inline-block"></span>
                    SYNC NEW OBJECTIVE
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <input type="text" id="taskName" placeholder="Define target..." class="task-input md:col-span-2 font-mono text-sm">
                    <input type="datetime-local" id="taskTime" class="task-input text-xs">
                    <button onclick="addTask()" id="addBtn" class="bg-ai-green text-black font-bold hover:bg-white transition-all text-sm uppercase">
                        Process Unit
                    </button>
                </div>
            </div>

            <div class="ai-border p-6 min-h-[500px]">
                <div class="flex justify-between items-center mb-6 border-b border-ai-green/10 pb-4">
                    <h2 class="text-sm font-bold uppercase tracking-widest font-hud">Active Command Matrix</h2>
                    <div class="text-[10px]">TOTAL_UNITS: <span id="totalCount" class="neon-text-green font-bold">0</span></div>
                </div>
                <div id="taskList" class="space-y-3"></div>
            </div>
        </section>
    </main>

    <script>
        const apiKey = "AIzaSyCBgwlvA70Xs_ri2-YCO7t2flAvua5Qo2Y";
        let tasks = [];
        let progressChart, waveChart;

        window.onload = () => {
            loadTasks();
            initCharts();
            renderTasks();
            updateStats();
            startClock();
            setInterval(updateActivityWave, 2000);
        }

        function startClock() {
            setInterval(() => {
                document.getElementById('clockDisplay').innerText = new Date().toISOString().replace('T', ' ').substring(0, 19);
            }, 1000);
        }

        async function fetchAIInsight(taskName) {
            const systemPrompt = "You are a cybernetic AI named HAMZA ELKOPA AI. Provide a very short (max 10 words) tactical advice or insight for this task. Be precise, authoritative, and cool.";
            
            let delay = 1000;
            for (let i = 0; i < 5; i++) {
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: taskName }] }],
                            systemInstruction: { parts: [{ text: systemPrompt }] }
                        })
                    });
                    
                    if (!response.ok) throw new Error('API Error');
                    const result = await response.json();
                    return result.candidates?.[0]?.content?.parts?.[0]?.text || "NO DATA AVAILABLE.";
                } catch (err) {
                    if (i === 4) return "OFFLINE_LINK_FAILURE.";
                    await new Promise(r => setTimeout(r, delay));
                    delay *= 2;
                }
            }
        }

        async function addTask() {
            const nameEl = document.getElementById('taskName');
            const timeEl = document.getElementById('taskTime');
            const btn = document.getElementById('addBtn');
            
            if (!nameEl.value.trim() || !timeEl.value) return;

            btn.disabled = true;
            btn.innerHTML = `<span class="loading-ring"></span>`;

            const insight = await fetchAIInsight(nameEl.value);

            const newTask = {
                id: Date.now(),
                name: nameEl.value.trim(),
                time: timeEl.value,
                completed: false,
                insight: insight
            };

            tasks.push(newTask);
            sync();
            nameEl.value = '';
            btn.disabled = false;
            btn.innerText = 'PROCESS UNIT';
        }

        function renderTasks() {
            const list = document.getElementById('taskList');
            if (tasks.length === 0) {
                list.innerHTML = `<div class="opacity-20 text-center py-20 font-mono text-xs uppercase tracking-widest">System idle. Awaiting user input...</div>`;
                return;
            }

            list.innerHTML = tasks.sort((a,b) => a.completed - b.completed || new Date(b.time) - new Date(a.time)).map(task => `
                <div class="p-4 ai-border bg-opacity-20 flex flex-col gap-2">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div onclick="toggleTask(${task.id})" class="w-6 h-6 border-2 border-ai-green cursor-pointer flex items-center justify-center ${task.completed ? 'bg-ai-green' : ''}">
                                ${task.completed ? '<span class="text-black font-bold">âœ“</span>' : ''}
                            </div>
                            <div>
                                <p class="text-sm font-bold ${task.completed ? 'opacity-30 line-through' : 'neon-text-green'}">${task.name}</p>
                                <p class="text-[9px] opacity-50 uppercase">${new Date(task.time).toLocaleString('en-US')}</p>
                            </div>
                        </div>
                        <button onclick="deleteTask(${task.id})" class="text-[9px] btn-action-red px-2 py-1 uppercase font-bold">Purge</button>
                    </div>
                    ${task.insight ? `<div class="ai-insight font-mono uppercase tracking-tighter">AI_INSIGHT: ${task.insight}</div>` : ''}
                </div>
            `).join('');
        }

        function toggleTask(id) { tasks = tasks.map(t => t.id === id ? {...t, completed: !t.completed} : t); sync(); }
        function deleteTask(id) { tasks = tasks.filter(t => t.id !== id); sync(); }

        function loadTasks() { tasks = JSON.parse(localStorage.getItem('elkopa_ai_tasks')) || []; }
        function sync() { localStorage.setItem('elkopa_ai_tasks', JSON.stringify(tasks)); renderTasks(); updateStats(); }

        function updateStats() {
            const total = tasks.length;
            const completed = tasks.filter(t => t.completed).length;
            const percent = total ? Math.round((completed / total) * 100) : 0;
            document.getElementById('percentLabel').innerText = percent + '%';
            document.getElementById('totalCount').innerText = total;
            progressChart.data.datasets[0].data = [completed, total === 0 ? 100 : total - completed];
            progressChart.update();

            const now = new Date();
            const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const startOfWeek = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
            const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);

            document.getElementById('countDay').innerText = tasks.filter(t => t.completed && new Date(t.time) >= startOfToday).length;
            document.getElementById('countWeek').innerText = tasks.filter(t => t.completed && new Date(t.time) >= startOfWeek).length;
            document.getElementById('countMonth').innerText = tasks.filter(t => t.completed && new Date(t.time) >= startOfMonth).length;
        }

        function initCharts() {
            const ctx = document.getElementById('mainProgress').getContext('2d');
            progressChart = new Chart(ctx, {
                type: 'doughnut',
                data: { datasets: [{ data: [0, 100], backgroundColor: ['#00f2ff', 'rgba(0, 242, 255, 0.02)'], borderColor: '#00f2ff', borderWidth: 1 }] },
                options: { cutout: '88%', plugins: { legend: false, tooltip: false } }
            });

            const ctxWave = document.getElementById('waveChart').getContext('2d');
            waveChart = new Chart(ctxWave, {
                type: 'line',
                data: { labels: Array(15).fill(''), datasets: [{ data: Array(15).fill(0).map(()=>Math.random()*5+2), borderColor: '#00f2ff', borderWidth: 1, fill: true, backgroundColor: 'rgba(0,242,255,0.05)', tension: 0.4, pointRadius: 0 }] },
                options: { scales: { x:{display:false}, y:{display:false, min:0, max:10} }, plugins: {legend:false} }
            });
        }

        function updateActivityWave() {
            waveChart.data.datasets[0].data.shift();
            waveChart.data.datasets[0].data.push(Math.random()*6+2);
            waveChart.update('none');
        }
    </script>
</body>
</html>
